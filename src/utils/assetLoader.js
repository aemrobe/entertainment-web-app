// Use import.meta.glob to import all images matching the pattern.
// This will create an object where keys are paths like '../assets/thumbnails/...'
// and values are the public URLs of the assets.
const allImages = import.meta.glob(
  "../assets/thumbnails/**/*.{jpg,jpeg,png,gif}",
  { eager: true, query: "?url", import: "default" }
);

/**
 * Transforms a JSON path (e.g., './assets/thumbnails/movie/regular/small.jpg')
 * into the actual public URL generated by Vite.
 *
 * @param {string} jsonPath The path string from your JSON data.
 * @returns {string} The public URL of the image, or an empty string if not found.
 */
export function getImageUrl(jsonPath) {
  // The keys in 'allImages' (from import.meta.glob) start with '../assets/'.
  // We need to transform the JSON path to match the glob key.
  // Example: './assets/thumbnails/beyond-earth/trending/small.jpg to ../assets/thumbnails/beyond-earth/trending/small.jpg'
  const viteGlobKey = `../${jsonPath.substring(2)}`; // Remove './' and prepend '../'

  // Return the URL if found, otherwise an empty string or a placeholder
  return allImages[viteGlobKey] || "";
}

// You could also export the allImages object directly if needed for debugging
// export { allImages };
